<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="CIS-0: Standard Detection" href="../CIS/cis-0.html" /><link rel="prev" title="Protocol Update 9 - Protocol-Level Tokens" href="P9.html" />

    <link rel="shortcut icon" href="../_static/concordium-logo-no-text.svg"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Protocol Update 9 - Protocol-Level Tokens - Interoperability Specifications</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=8806b39e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Interoperability Specifications</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/concordium-logo-black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/concordium-logo-white.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Interoperability Specifications</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Protocol Updates</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="P2.html">Protocol Update 2 - Alpha Centauri 2.0 - Transaction Memos</a></li>
<li class="toctree-l1"><a class="reference internal" href="P3.html">Protocol Update 3 - Alpha Centauri 3.0 - Account Aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="P4.html">Protocol Update 4 - Sirius - Delegation and new contract state</a></li>
<li class="toctree-l1"><a class="reference internal" href="P5.html">Protocol Update 5 - Smart contract upgradability, performance improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="P6.html">Protocol Update 6 - Concordium BFT consensus protocol, changes in Wasm validation and execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="P7.html">Protocol Update 7 - Smart contract costs and new queries, stake cooldown changes, disabling shielded transfers, revised block hashing</a></li>
<li class="toctree-l1"><a class="reference internal" href="P8.html">Protocol Update 8 - Suspension of inactive validators</a></li>
<li class="toctree-l1"><a class="reference internal" href="P9.html">Protocol Update 9 - Protocol-Level Tokens</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Protocol Update 9 - Protocol-Level Tokens</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Standards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-0.html">CIS-0: Standard Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-1.html">CIS-1: Concordium Token Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-2.html">CIS-2: Concordium Token Standard 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-3.html">CIS-3: Sponsored Transaction Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-4.html">CIS-4: Credential Registry Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-5.html">CIS-5: Smart Contract Wallet Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-6.html">CIS-6: Track-and-Trace Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CIS/cis-7.html">CIS-7: Protocol-level Tokens (PLTs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ID/concordium-did.html">Concordium DID Method Version 1.0</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/updates/P10.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="protocol-update-9-protocol-level-tokens">
<h1>Protocol Update 9 - Protocol-Level Tokens<a class="headerlink" href="#protocol-update-9-protocol-level-tokens" title="Link to this heading">¶</a></h1>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><th class="stub"><p>Effective on Testnet</p></th>
<td><p>TBD</p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Effective on Mainnet</p></th>
<td><p>TBD</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Specification hash</p></th>
<td><p>6d84de01ccda394638459daa6b9e374094236d3e2e8fd19a51e7136abe77b06d</p></td>
</tr>
</tbody>
</table>
</div>
<section id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Link to this heading">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                           Protocol update

Protocol Version: 10
Builds on Protocol Version: 9

                               Abstract

This document describes the changes in Concordium protocol version 10 compared
to protocol version 9.

The protocol change introduces sponsored transactions, which allow an account
other than the sender of a transaction to pay the transaction fee.

                              Background

Transactions on the Concordium blockchain originate from a sender account. To
be included in the chain, a transaction must be correctly signed by the sender
account&#39;s keys. Transactions are authorized to act on behalf of the sender
(e.g. to transfer funds from the sender account) but generally cannot act on
behalf of any other account. Moreover, each transaction has an associated fee,
which, prior to protocol version 10, is paid in CCD by the sender account when
the transaction is included in a block.

Protocol version 10 introduces sponsored transactions. In addition to a sender
account, a sponsored transaction has a sponsor account that co-signs the
transaction. For a sponsored transaction, the transaction fee is charged to the
sponsor account instead of the sender account. In all other respects, a
sponsored transaction behaves the same as a (non-sponsored) transaction from
the sender. In particular, the transaction is authorized to act on behalf of the
sender account, but not on behalf of the sponsor account.

                               Changes

The following behaviours are changed in protocol version 10:

1. A new BlockItem type is introduced: TransactionV1. The first byte of the
   serialization of a BlockItem is a tag indicating the type; for TransactionV1,
   this is the value 3. The body of the TransactionV1 BlockItem consists
   of 3 elements:

   - `signatures`: this comprises a signature from the sender account, and
     (optionally) a signature from the sponsor account. Each signature consists
     of a one-byte count of the number of signing credentials from the relevant
     account, followed by the specified number of credential signatures. Each
     credential signature consists of a one-byte index of the credential, a
     one-byte count of the number of signing-keys used, and a sequence of
     key-index and signature pairs.

   - `header`: the TransactionHeaderV1 consists of the following:
   
     - `bitmap`: a 16-bit (big-endian) bitmap indicating which optional fields
       are included in the header. In protocol version 10, only the least-
       significant bit may be set. When the bit is set, it indicates that the
       `sponsor` field is present.

     - `sender`: the address of the sender of the transaction.

     - `sequenceNumber`: the sequence number of the transaction (with respect to
       the sender account).

     - `energyAmount`: the amount of energy allocated for executing the
       transaction.

     - `payloadSize`: the size of the transaction payload in bytes.

     - `expiry`: the expiry time of the transaction in seconds since the UNIX
       epoch.
    
     - `sponsor` (optional): if present, the address of the sponsor account for
       the transaction.

  - `encodedPayload`: the (serialized) transaction payload.

  The message that is signed by the sender and (optional) sponsor is the
  SHA256 hash of the concatenation of: 31 bytes of 0, 1 byte of 1, the
  serialized `header`, and the `encodedPayload`. The 32-byte prefix ensures that
  the signed message will never coincide with a valid (V0) transaction.

2. From protocol version 10, TransactionV1 BlockItems are included in
   blocks, if they are valid. A TransactionV1 is considered valid if the
   following conditions are met:

   - The transaction payload size does not exceed the maximum payload size
     supported by the protocol version. As of protocol version 10, this is
     524297 bytes. (This has not changed since protocol version 4.)

   - The energy allocated for executing the transaction (the reserved energy)
     is sufficient to cover the base cost of the transaction. The base
     cost (in energy) is 100 * number of signatures + total number of bytes in
     the serialized header and payload.

   - The transaction expiry time does not exceed the block time.

   - The sender account is valid.

   - The transaction signature from the sender is valid.

   - If the transaction includes a sponsor, then the sponsor account is valid
     and a valid signature from the sponsor is present. If the transaction does
     not include a sponsor, then a sponsor signature must not be present.

   - The sequence number of the transaction is the next sequence number for the
     sender account.

   - The payer account has sufficient available balance to cover the cost of the
     reserved energy. The payer account is the sponsor account if one is
     present, and otherwise is the sender account. The required balance is
     calculated using the current energy-to-CCD rate (which is calculated from
     the Euro per energy and micro-CCD per Euro rates).

3. The effect of executing a TransactionV1 BlockItem within a block is the same
   as for a (V0) transaction, except that, in the case of a sponsored
   transaction, the transaction fee is deducted from the balance of the sponsor
   account instead of the sender account.

4. The transaction summary from protocol version 10 is changed as follows:

   - The transaction summary includes optional sponsor details. This is
     present for sponsored transactions and consists of the sponsor account
     address and the CCD cost paid by the sponsor. (This is the transaction
     fee.)

   - Regardless of whether the transaction is sponsored, the transaction
     summary includes the cost of fees charged to the sender account. For a
     sponsored transaction, this is 0; otherwise, it is the transaction fee.

   - The hash computation for a transaction summary, which is used to calculate
     the hash of the block transaction outcomes (and thus the block hash), is
     the SHA256 hash of the concatenation of the following:

     - the string &quot;TransactionOutcomeHashV1&quot;;

     - if a sender is present, then the byte 1 followed by the 32-byte
       serialized sender account address; if no sender is present, then a
       sequence of 33 0 bytes;

     - if a sponsor is present, then the byte 1 followed by the 32-byte
       serialized sponsor address and the 8-byte serialized cost to the sponsor;
       if no sponsor is present, then just the byte 0;

     - the hash of the transaction;

     - the serialized cost to the sender;

     - the serialized energy cost;

     - the serialized transaction type (account transaction, credential
       deployment, or chain update);

     - the index of the transaction within the block; and

     - if the transaction is successful, the byte 0 followed by the 
       (length-prefixed) list of serialized transaction events; if it is
       unsuccessful (i.e. rejected), the byte 1.

     This computation corresponds with the P9 computation except for the
     addition of the conditional sponsor details.

                     Protocol update instruction

The protocol update instruction is identified by the SHA256 hash of this
file. The auxiliary data must be empty.
</pre></div>
</div>
</section>
<section id="commentary">
<h2>Commentary<a class="headerlink" href="#commentary" title="Link to this heading">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                      Protocol update commentary

Protocol Version: 10
Builds on Protocol Version: 9

Protocol version 10 introduces protocol-level sponsored transactions. Sponsored
transactions are transactions where the transaction fees are paid by an account
other than the sender account, i.e., a sponsor account.

Prior to protocol version 10, sponsored transactions have been possible to a
limited extent using the CIS-3 standard [1]. This is limited to smart contract
transactions, and only those where the smart contract supports the standard.
In CIS-3 sponsored transactions, the transaction sender is the sponsor
account, but the smart contract transaction contains signatures that authorize
action on behalf of the sponsored account.

Protocol-level sponsored transactions, by contrast, allow any account
transaction to be sponsored, not just smart contract transactions. This includes
CCD transfer and staking operations, but most significantly protocol-level token
(PLT) transactions. Since PLTs are not held in or managed by smart contracts,
the CIS-3 standard cannot support sponsored PLT transactions. However, it may
well be desirable for accounts to be able to hold and transact with PLTs
without holding CCDs, which are required for payment of transaction fees.
Protocol-level sponsored transactions support such use-cases by allowing
sponsor accounts to bear the transaction fees.

Sponsored transactions are more expensive than the non-sponsored equivalent
transactions. This cost largely arises from the additional cost of checking
sponsor signatures (100 energy per signature) and the additional size of the
header (34 energy: 2 for the bitmap and 32 for the sponsor account address).

While the new TransactionV1 format supports both sponsored and non-sponsored
transactions, the existing (V0) transaction format is still supported for
non-sponsored transactions. This ensures backwards compatibility with existing
wallets and tooling, which do not need to adopt the new format except to support
sponsored transactions. Moreover, a non-sponsored TransactionV1 will incur an
additional cost of 2 energy over the corresponding V0 transaction, since the
V1 header includes a 2-byte bitmap. It is therefore recommended (though not
required) for tooling to use V0 transactions for non-sponsored transactions.

                             References

[1] CIS-3: Sponsored Transaction Standard
    &lt;https://proposals.concordium.com/CIS/cis-3.html&gt;
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../CIS/cis-0.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">CIS-0: Standard Detection</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="P9.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Protocol Update 9 - Protocol-Level Tokens</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Concordium
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Protocol Update 9 - Protocol-Level Tokens</a><ul>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#commentary">Commentary</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>