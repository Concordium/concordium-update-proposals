<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="CIS-5: Smart Contract Wallet Standard" href="cis-5.html" /><link rel="prev" title="CIS-3: Sponsored Transaction Standard" href="cis-3.html" />

    <link rel="shortcut icon" href="../_static/concordium-logo-no-text.svg"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>CIS-4: Credential Registry Standard - Interoperability Specifications</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=8806b39e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Interoperability Specifications</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/concordium-logo-black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/concordium-logo-white.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Interoperability Specifications</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Protocol Updates</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../updates/P2.html">Protocol Update 2 - Alpha Centauri 2.0 - Transaction Memos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P3.html">Protocol Update 3 - Alpha Centauri 3.0 - Account Aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P4.html">Protocol Update 4 - Sirius - Delegation and new contract state</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P5.html">Protocol Update 5 - Smart contract upgradability, performance improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P6.html">Protocol Update 6 - Concordium BFT consensus protocol, changes in Wasm validation and execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P7.html">Protocol Update 7 - Smart contract costs and new queries, stake cooldown changes, disabling shielded transfers, revised block hashing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P8.html">Protocol Update 8 - Suspension of inactive validators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P9.html">Protocol Update 9 - Protocol-Level Tokens</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Standards</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cis-0.html">CIS-0: Standard Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-1.html">CIS-1: Concordium Token Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-2.html">CIS-2: Concordium Token Standard 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-3.html">CIS-3: Sponsored Transaction Standard</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">CIS-4: Credential Registry Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-5.html">CIS-5: Smart Contract Wallet Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-6.html">CIS-6: Track-and-Trace Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ID/concordium-did.html">Concordium DID Method Version 1.0</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/CIS/cis-4.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="cis-4-credential-registry-standard">
<span id="cis-4"></span><h1>CIS-4: Credential Registry Standard<a class="headerlink" href="#cis-4-credential-registry-standard" title="Link to this heading">¶</a></h1>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><th class="stub"><p>Created</p></th>
<td><p>May 1, 2023</p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Final</p></th>
<td><p>Oct 8, 2023</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Supported versions</p></th>
<td><div class="line-block">
<div class="line">Smart contract version 1 or newer</div>
<div class="line">(Protocol version 4 or newer)</div>
</div>
</td>
</tr>
<tr class="row-even"><th class="stub"><p>Standard identifier</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">CIS-4</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Link to this heading">¶</a></h2>
<p>A standard interface for verifiable credential (VC) registries.
A registry keeps track of public VC data and manages the VC lifecycle.
The interface provides functionality for the following roles of users:</p>
<ul class="simple">
<li><p><em>credential issuers</em> can register and revoke credentials, manage revocation keys;</p></li>
<li><p><em>credential holders</em> can revoke holder-revocable credentials by signing a revocation message;</p></li>
<li><p><em>verifiers</em> can query credential status and data that are used to check a verifiable presentation requested from a holder;</p></li>
<li><p><em>revocation authorities</em> can revoke credentials by signing a revocation message.</p></li>
</ul>
<p>Each contract instance MUST store public data of VCs of the same type.
A <em>credential type</em> is a string that corresponds to the name of the VCs JSON schema, which credentials in the registry are based on.
A <a class="reference external" href="https://w3c.github.io/vc-json-schema/">VCs JSON schema</a> is a <a class="reference external" href="http://json-schema.org/">JSON schema</a> describing the attributes of a VC.
Attributes are sequentially numbered and have their numbers recorded in the additional <code class="docutils literal notranslate"><span class="pre">index</span></code> field in the schema.
See VC schema examples and the corresponding VCs <a class="reference external" href="https://github.com/Concordium/concordium-web3id/tree/main/examples/json-schemas">here</a>.</p>
</section>
<section id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Link to this heading">¶</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”,  “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2119.html"><strong>RFC 2119</strong></a>.</p>
<section id="general-types-and-serialization">
<h3>General types and serialization<a class="headerlink" href="#general-types-and-serialization" title="Link to this heading">¶</a></h3>
<section id="bool">
<span id="cis-4-bool"></span><h4><code class="docutils literal notranslate"><span class="pre">Bool</span></code><a class="headerlink" href="#bool" title="Link to this heading">¶</a></h4>
<p>A boolean is serialized as a byte with value 0 for false and 1 for true:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bool ::= (0: Byte) // False
       | (1: Byte) // True
</pre></div>
</div>
</section>
<section id="credentialholderid">
<span id="cis-4-credentialholderid"></span><h4><code class="docutils literal notranslate"><span class="pre">CredentialHolderId</span></code><a class="headerlink" href="#credentialholderid" title="Link to this heading">¶</a></h4>
<p>A credential identifier is a holder’s public key.
It is expected that for each issued credential a unique public key is generated.
The credential identifier also identifies the credential holder and can be used to prove ownership of the credential by the holder.</p>
<p>It is serialized as <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a>.</p>
</section>
<section id="metadataurl">
<span id="cis-4-metadataurl"></span><h4><code class="docutils literal notranslate"><span class="pre">MetadataUrl</span></code><a class="headerlink" href="#metadataurl" title="Link to this heading">¶</a></h4>
<p>A URL and optional checksum for metadata stored outside of this contract.</p>
<p>It is serialized as: 2 bytes for the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the metadata URL in little-endian and then this many bytes for the URL to the metadata (<code class="docutils literal notranslate"><span class="pre">url</span></code>) followed by an optional checksum.
The checksum is serialized by 1 byte to indicate whether a hash of the metadata is included.
If its value is 0, then there is no hash; if the value is 1, then 32 bytes for a SHA256 hash (<code class="docutils literal notranslate"><span class="pre">hash</span></code>) follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>MetadataChecksum ::= (0: Byte)
                   | (1: Byte) (hash: Byte³²)

MetadataUrl ::= (n: Byte²) (url: Byteⁿ) (checksum: MetadataChecksum)
</pre></div>
</div>
</section>
<section id="contractaddress">
<span id="cis-4-contractaddress"></span><h4><code class="docutils literal notranslate"><span class="pre">ContractAddress</span></code><a class="headerlink" href="#contractaddress" title="Link to this heading">¶</a></h4>
<p>An address of a contract instance.
It consists of an index and a subindex, both unsigned 64-bit integers.</p>
<p>It is serialized as: First 8 bytes for the index (<code class="docutils literal notranslate"><span class="pre">index</span></code>) followed by 8 bytes for the subindex (<code class="docutils literal notranslate"><span class="pre">subindex</span></code>), both little-endian:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ContractAddress ::= (index: Byte⁸) (subindex: Byte⁸)
</pre></div>
</div>
</section>
<section id="accountaddress">
<span id="cis-4-accountaddress"></span><h4><code class="docutils literal notranslate"><span class="pre">AccountAddress</span></code><a class="headerlink" href="#accountaddress" title="Link to this heading">¶</a></h4>
<p>An address of an account.</p>
<p>It is serialized as 32 bytes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AccountAddress ::= (address: Byte³²)
</pre></div>
</div>
</section>
<section id="entrypointname">
<span id="cis-4-entrypointname"></span><h4><code class="docutils literal notranslate"><span class="pre">EntrypointName</span></code><a class="headerlink" href="#entrypointname" title="Link to this heading">¶</a></h4>
<p>A name for a smart contract function entrypoint.</p>
<p>It is serialized as: First 2 bytes encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the entrypoint name in little-endian, followed by this many bytes for the entrypoint name (<code class="docutils literal notranslate"><span class="pre">entrypoint</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EntrypointName ::= (n: Byte²) (entrypoint: Byteⁿ)
</pre></div>
</div>
</section>
<section id="timestamp">
<span id="cis-4-timestamp"></span><h4><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code><a class="headerlink" href="#timestamp" title="Link to this heading">¶</a></h4>
<p>A timestamp given in milliseconds since Unix epoch.
It consists of an unsigned 64-bit integer.</p>
<p>It is serialized as 8 bytes in little-endian:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Timestamp ::= (milliseconds: Byte⁸)
</pre></div>
</div>
</section>
<section id="nonce">
<span id="cis-4-nonce"></span><h4><code class="docutils literal notranslate"><span class="pre">Nonce</span></code><a class="headerlink" href="#nonce" title="Link to this heading">¶</a></h4>
<p>An unsigned 64-bit integer number that increases sequentially to protect against replay attacks.</p>
<p>It is serialized as 8 bytes in little-endian:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Nonce ::= (nonce: Byte⁸)
</pre></div>
</div>
</section>
<section id="publickeyed25519">
<span id="cis-4-publickeyed25519"></span><h4><code class="docutils literal notranslate"><span class="pre">PublicKeyEd25519</span></code><a class="headerlink" href="#publickeyed25519" title="Link to this heading">¶</a></h4>
<p>A public key is represented as a 32-byte array.</p>
<p>It is serialized as 32 bytes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PublicKeyEd25519 ::= (key: Byte³²)
</pre></div>
</div>
</section>
<section id="signatureed25519">
<span id="cis-4-signatureed25519"></span><h4><code class="docutils literal notranslate"><span class="pre">SignatureEd25519</span></code><a class="headerlink" href="#signatureed25519" title="Link to this heading">¶</a></h4>
<p>Signature for an Ed25519 message.</p>
<p>It is serialized as 64 bytes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SignatureEd25519 ::= (signature: Byte⁶⁴)
</pre></div>
</div>
</section>
<section id="signingdata">
<span id="cis-4-signingdata"></span><h4><code class="docutils literal notranslate"><span class="pre">SigningData</span></code><a class="headerlink" href="#signingdata" title="Link to this heading">¶</a></h4>
<p>Signing data contains metadata for the signature that is used to check whether the signed message is designated for the correct contract and entrypoint, and that it is not expired.</p>
<p>It is serialized as <a class="reference internal" href="#cis-4-contractaddress"><span class="std std-ref">ContractAddress</span></a> (<code class="docutils literal notranslate"><span class="pre">contract_address</span></code>), <a class="reference internal" href="#cis-4-entrypointname"><span class="std std-ref">EntrypointName</span></a> (<code class="docutils literal notranslate"><span class="pre">entrypoint</span></code>), <a class="reference internal" href="#cis-4-nonce"><span class="std std-ref">Nonce</span></a> (<code class="docutils literal notranslate"><span class="pre">nonce</span></code>), and <a class="reference internal" href="#cis-4-timestamp"><span class="std std-ref">Timestamp</span></a> (<code class="docutils literal notranslate"><span class="pre">timestamp</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SigningData ::= (contract_address: ContractAddress) (entrypoint: EntrypointName) (nonce: Nonce) (timestamp: Timestamp)
</pre></div>
</div>
</section>
<section id="schemaref">
<span id="cis-4-schemaref"></span><h4><code class="docutils literal notranslate"><span class="pre">SchemaRef</span></code><a class="headerlink" href="#schemaref" title="Link to this heading">¶</a></h4>
<p>A URL of the credential schema.</p>
<p>Serialized in the same way as <a class="reference internal" href="#cis-4-metadataurl"><span class="std std-ref">MetadataUrl</span></a>.</p>
</section>
<section id="credentialtype">
<span id="cis-4-credentialtype"></span><h4><code class="docutils literal notranslate"><span class="pre">CredentialType</span></code><a class="headerlink" href="#credentialtype" title="Link to this heading">¶</a></h4>
<p>A short string (up to 256 characters) in UTF-8 encoding.
The string describes the credential type that is used to identify which schema the credential is based on.
It corresponds to a value of the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of the credential schema.</p>
<p>It is serialized as: First byte encodes the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the credential type, followed by this many bytes for the credential type string:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CredentialType ::= (n: Byte) (credential_type: Byteⁿ)
</pre></div>
</div>
</section>
<section id="credentialinfo">
<span id="cis-4-credentialinfo"></span><h4><code class="docutils literal notranslate"><span class="pre">CredentialInfo</span></code><a class="headerlink" href="#credentialinfo" title="Link to this heading">¶</a></h4>
<p>Basic data for a verifiable credential.</p>
<p>It is serialized as a credential holder identifier <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> (<code class="docutils literal notranslate"><span class="pre">holder_id</span></code>), a flag whether the credential can be revoked by the holder <a class="reference internal" href="#cis-4-bool"><span class="std std-ref">Bool</span></a> (<code class="docutils literal notranslate"><span class="pre">holder_revocable</span></code>), a <a class="reference internal" href="#cis-4-timestamp"><span class="std std-ref">Timestamp</span></a> from which the credential is valid (<code class="docutils literal notranslate"><span class="pre">valid_from</span></code>), an optional <a class="reference internal" href="#cis-4-timestamp"><span class="std std-ref">Timestamp</span></a> until which the credential is valid (<code class="docutils literal notranslate"><span class="pre">valid_until</span></code>), and a reference to the credential metadata <a class="reference internal" href="#cis-4-metadataurl"><span class="std std-ref">MetadataUrl</span></a> (<code class="docutils literal notranslate"><span class="pre">metadata_url</span></code>).
The optional timestamp is serialized as 1 byte to indicate whether a timestamp is included. If its value is 0, then no timestamp is present; if the value is 1, then the <a class="reference internal" href="#cis-4-timestamp"><span class="std std-ref">Timestamp</span></a> bytes follow:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OptionalTimestamp ::= (0: Byte)
                    | (1: Byte) (timestamp: Timestamp)
CredentialInfo ::= (holder_id: CredentialHolderId) (holder_revocable: Bool) (valid_from: Timestamp)
                   (valid_until: OptionTimestamp) (metadata_url: MetadataUrl)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The timestamp <code class="docutils literal notranslate"><span class="pre">valid_until</span></code> is optional; if it is not included (indicated by the 0 tag), then the credential never expires.</p>
</div>
</section>
<section id="credentialstatus">
<span id="cis-4-credentialstatus"></span><h4><code class="docutils literal notranslate"><span class="pre">CredentialStatus</span></code><a class="headerlink" href="#credentialstatus" title="Link to this heading">¶</a></h4>
<p>The status of a verifiable credential.</p>
<p>It is serialized as 1 byte where <code class="docutils literal notranslate"><span class="pre">0</span></code> correponds to the status <code class="docutils literal notranslate"><span class="pre">Active</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code> corresponds to  <code class="docutils literal notranslate"><span class="pre">Revoked</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code> corresponds to  <code class="docutils literal notranslate"><span class="pre">Expired</span></code>, <code class="docutils literal notranslate"><span class="pre">3</span></code> corresponds to <code class="docutils literal notranslate"><span class="pre">NotActivated</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CredentialStatus ::= (0: Byte) // Active
                   | (1: Byte) // Revoked
                   | (2: Byte) // Expired
                   | (3: Byte) // NotActivated
</pre></div>
</div>
<p>See requirements for <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a> for details of how statuses are returned.</p>
</section>
</section>
<section id="contract-functions">
<span id="cis-4-functions"></span><h3>Contract functions<a class="headerlink" href="#contract-functions" title="Link to this heading">¶</a></h3>
<p>A smart contract implementing this standard MUST export the following functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cis-4-functions-credentialentry"><span class="std std-ref">credentialEntry</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-issuer"><span class="std std-ref">issuer</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-registrymetadata"><span class="std std-ref">registryMetadata</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-registercredential"><span class="std std-ref">registerCredential</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-revokecredentialissuer"><span class="std std-ref">revokeCredentialIssuer</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-revokecredentialholder"><span class="std std-ref">revokeCredentialHolder</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-revokecredentialother"><span class="std std-ref">revokeCredentialOther</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-registerrevocationkeys"><span class="std std-ref">registerRevocationKeys</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-removerevocationkeys"><span class="std std-ref">removeRevocationKeys</span></a></p></li>
<li><p><a class="reference internal" href="#cis-4-functions-revocationkeys"><span class="std std-ref">revocationKeys</span></a></p></li>
</ul>
<section id="credentialentry">
<span id="cis-4-functions-credentialentry"></span><h4><code class="docutils literal notranslate"><span class="pre">credentialEntry</span></code><a class="headerlink" href="#credentialentry" title="Link to this heading">¶</a></h4>
<p>Query a credential entry from the registry by ID.</p>
<section id="parameter">
<h5>Parameter<a class="headerlink" href="#parameter" title="Link to this heading">¶</a></h5>
<p>The parameter is the credential ID.</p>
<p>See the serialization rules in <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a>.</p>
</section>
<section id="response">
<h5>Response<a class="headerlink" href="#response" title="Link to this heading">¶</a></h5>
<p>The function returns a registry entry corresponding to the credential ID parameter.</p>
<p>It is serialized as <a class="reference internal" href="#cis-4-credentialinfo"><span class="std std-ref">CredentialInfo</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_info</span></code>) followed by a credential schema reference <a class="reference internal" href="#cis-4-schemaref"><span class="std std-ref">SchemaRef</span></a> (<code class="docutils literal notranslate"><span class="pre">schema_ref</span></code>), and a credential entry revocation <a class="reference internal" href="#cis-4-nonce"><span class="std std-ref">Nonce</span></a> (<code class="docutils literal notranslate"><span class="pre">revocation_nonce</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CredentialQueryResponse ::= (credential_info: CredentialInfo) (schema_ref: SchemaRef) (revocation_nonce: Nonce)
</pre></div>
</div>
</section>
<section id="requirements">
<h5>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>The query MUST fail if the credential ID is not present in the registry.</p></li>
</ul>
</section>
</section>
<section id="cis-4-functions-credentialstatus">
<span id="id1"></span><h4><code class="docutils literal notranslate"><span class="pre">credentialStatus</span></code><a class="headerlink" href="#cis-4-functions-credentialstatus" title="Link to this heading">¶</a></h4>
<p>Query the status of a credential from the credential registry by ID.</p>
<section id="id2">
<h5>Parameter<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h5>
<p>The parameter is the credential ID.</p>
<p>See the serialization rules in <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a>.</p>
</section>
<section id="id3">
<h5>Response<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h5>
<p>The function returns the status of a credential.</p>
<p>See the serialization rules in <a class="reference internal" href="#cis-4-credentialstatus"><span class="std std-ref">CredentialStatus</span></a></p>
</section>
<section id="id4">
<h5>Requirements<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>The query MUST fail if the credential ID is not present in the registry.</p></li>
<li><p>The credential status MUST be <code class="docutils literal notranslate"><span class="pre">Expired</span></code> if the credential is not revoked, the field <code class="docutils literal notranslate"><span class="pre">valid_until</span></code> was present in <a class="reference internal" href="#cis-4-credentialinfo"><span class="std std-ref">CredentialInfo</span></a> when registering the credential, and <code class="docutils literal notranslate"><span class="pre">valid_until</span> <span class="pre">&lt;</span> <span class="pre">now</span></code>.</p></li>
<li><p>The credential status MUST NOT be <code class="docutils literal notranslate"><span class="pre">Expired</span></code> if the field <code class="docutils literal notranslate"><span class="pre">valid_until</span></code> was not present in <a class="reference internal" href="#cis-4-credentialinfo"><span class="std std-ref">CredentialInfo</span></a> when registering the credential.</p></li>
<li><p>The credential status MUST be <code class="docutils literal notranslate"><span class="pre">NotActivated</span></code> if <code class="docutils literal notranslate"><span class="pre">now</span> <span class="pre">&lt;</span> <span class="pre">valid_from</span></code>, where <code class="docutils literal notranslate"><span class="pre">valid_from</span></code> is the corresponding value from <a class="reference internal" href="#cis-4-credentialinfo"><span class="std std-ref">CredentialInfo</span></a> provided when registering the credential.</p></li>
<li><p>The credential status MUST be <code class="docutils literal notranslate"><span class="pre">Acive</span></code> if the credential is not revoked, and does not qualify as <code class="docutils literal notranslate"><span class="pre">Expired</span></code> or <code class="docutils literal notranslate"><span class="pre">NotActivated</span></code>.</p></li>
</ul>
</section>
</section>
<section id="issuer">
<span id="cis-4-functions-issuer"></span><h4><code class="docutils literal notranslate"><span class="pre">issuer</span></code><a class="headerlink" href="#issuer" title="Link to this heading">¶</a></h4>
<p>Query the issuer’s public key.
The corresponding private key is used to sign the public part of verifiable credentials issued by this issuer.</p>
<section id="id5">
<h5>Response<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h5>
<p>The function output is the issuer’s public key.
It is serialized as <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a>.</p>
</section>
</section>
<section id="registrymetadata">
<span id="cis-4-functions-registrymetadata"></span><h4><code class="docutils literal notranslate"><span class="pre">registryMetadata</span></code><a class="headerlink" href="#registrymetadata" title="Link to this heading">¶</a></h4>
<p>Query the registry’s metadata.</p>
<section id="id6">
<h5>Response<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h5>
<p>The function output is the issuer’s metadata URL, the credential type and schema for the credentials stored in the registry.</p>
<p>It is serialized as the issuer’s <a class="reference internal" href="#cis-4-metadataurl"><span class="std std-ref">MetadataUrl</span></a> (<code class="docutils literal notranslate"><span class="pre">issuer_metadata</span></code>) followed by the credential type of the registry <a class="reference internal" href="#cis-4-credentialtype"><span class="std std-ref">CredentialType</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_type</span></code>) and the corresponding credential JSON schema reference <a class="reference internal" href="#cis-4-schemaref"><span class="std std-ref">SchemaRef</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_schema</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>MetadataResponse := (issuer_metadata: MetadataUrl) (credential_type: CredentialType) (credential_schema: SchemaRef)
</pre></div>
</div>
</section>
</section>
<section id="registercredential">
<span id="cis-4-functions-registercredential"></span><h4><code class="docutils literal notranslate"><span class="pre">registerCredential</span></code><a class="headerlink" href="#registercredential" title="Link to this heading">¶</a></h4>
<p>Register public data for a new credential.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This standard does not specify how the issuer is authenticated.
Implementations can use various mechanisms.
For example, the transaction sender’s address is checked against the issuer’s account address stored in the contract.
Another option is to use <code class="docutils literal notranslate"><span class="pre">auxiliary_data</span></code> to implement a signature-based authentication mechanism.</p>
</div>
<section id="id7">
<h5>Parameter<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h5>
<p>The parameter is credential information that is used to create an entry in the registry.</p>
<p>It is serialized as <a class="reference internal" href="#cis-4-credentialinfo"><span class="std std-ref">CredentialInfo</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_info</span></code>), followed by auxiliary data, which is serialized as 2 bytes to encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the vector of keys in little-endian, followed by this many bytes of data:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AuxData ::= (n: Byte²) (data: Byteⁿ)
RegisterCredentialParameter ::= (credential_info: CredentialInfo) (auxiliary_data: AuxData)
</pre></div>
</div>
</section>
<section id="id8">
<h5>Requirements<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>The credential registration request MUST fail if the credential ID is already present in the registry.</p></li>
<li><p>After successful registration, querying the credential by its ID with <a class="reference internal" href="#cis-4-functions-credentialentry"><span class="std std-ref">credentialEntry</span></a> MUST succeed.</p></li>
</ul>
</section>
</section>
<section id="revokecredentialissuer">
<span id="cis-4-functions-revokecredentialissuer"></span><h4><code class="docutils literal notranslate"><span class="pre">revokeCredentialIssuer</span></code><a class="headerlink" href="#revokecredentialissuer" title="Link to this heading">¶</a></h4>
<p>Revoke a credential by the issuer’s request.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This standard does not specify how the issuer is authenticated.
Implementations can use various mechanisms.
For example, the transaction sender’s address is checked against the issuer’s account address stored in the contract.
Another option is to use <code class="docutils literal notranslate"><span class="pre">auxiliary_data</span></code> to implement a signature-based authentication mechanism.</p>
</div>
<section id="id9">
<h5>Parameter<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h5>
<p>The parameter is the credential ID <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> and an optional string in the UTF-8 encoding that indicates the revocation reason.</p>
<p>It is serialized as <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> followed by 1 byte to indicate whether a reason is included.
If its value is 0, then no reason string is present; if the value is 1, then the bytes corresponding to the reason string follow.
The optional revocation reason is followed by auxiliary data, which is serialized as 2 bytes to encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the data vector in little-endian, followed by this many bytes of data:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OptionalReason ::= (0: Byte)
                 | (1: Byte) (n: Byte) (reason_string: Byteⁿ)
AuxData ::= (n: Byte²) (data: Byteⁿ)
RevokeCredentialIssuerParam ::= (credential_id: CredentialHolderId) (reason: OptionalReason) (auxiliary_data: AuxData)
</pre></div>
</div>
</section>
<section id="id10">
<h5>Requirements<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>If revoked successfully, the credential status MUST change to <code class="docutils literal notranslate"><span class="pre">Revoked</span></code> (see <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a>).</p></li>
<li><dl class="simple">
<dt>The revocation MUST fail if any of the following conditions are met:</dt><dd><ul>
<li><p>The credential ID is not present in the registry.</p></li>
<li><p>The credential status is not one of <code class="docutils literal notranslate"><span class="pre">Active</span></code> or <code class="docutils literal notranslate"><span class="pre">NotActivated</span></code> (see <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a>).</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="revokecredentialholder">
<span id="cis-4-functions-revokecredentialholder"></span><h4><code class="docutils literal notranslate"><span class="pre">revokeCredentialHolder</span></code><a class="headerlink" href="#revokecredentialholder" title="Link to this heading">¶</a></h4>
<p>Revoke a credential by the holders’s request.</p>
<p>The holder is authorized to revoke a credential by verifying the signature with the holder’s public key.
The public key is part of <a class="reference internal" href="#cis-4-credentialinfo"><span class="std std-ref">CredentialInfo</span></a> that is used when registering a credential with the <a class="reference internal" href="#cis-4-functions-registercredential"><span class="std std-ref">registerCredential</span></a> entrypoint.</p>
<section id="id11">
<h5>Parameter<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h5>
<p>It is serialized as <a class="reference internal" href="#cis-4-signatureed25519"><span class="std std-ref">SignatureEd25519</span></a> (<code class="docutils literal notranslate"><span class="pre">signature</span></code>) and data, for which the signature is computed <code class="docutils literal notranslate"><span class="pre">RevocationDataHolder</span></code> (<code class="docutils literal notranslate"><span class="pre">message</span></code>), consisting of <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_id</span></code>), metadata about the signature <a class="reference internal" href="#cis-4-signingdata"><span class="std std-ref">SigningData</span></a> (<code class="docutils literal notranslate"><span class="pre">signing_data</span></code>), and an optional revocation reason (<code class="docutils literal notranslate"><span class="pre">reason</span></code>), serialized similarly to <a class="reference internal" href="#cis-4-functions-revokecredentialissuer"><span class="std std-ref">revokeCredentialIssuer</span></a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RevocationDataHolder ::= (credential_id: CredentialHolderId) (signing_data: SigningData) (reason: OptionalReason)
RevokeCredentialHolderParam ::= (signature: SignatureEd25519) (message : RevocationDataHolder)
</pre></div>
</div>
</section>
<section id="id12">
<h5>Requirements<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>If revoked successfully, the credential status MUST change to <code class="docutils literal notranslate"><span class="pre">Revoked</span></code> (see <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a>).</p></li>
<li><dl class="simple">
<dt>The message to be signed MUST be produced in the following way:</dt><dd><ul>
<li><p>Start with the bytes of the domain separation string <code class="docutils literal notranslate"><span class="pre">WEB3ID:REVOKE</span></code>.</p></li>
<li><p>Append <code class="docutils literal notranslate"><span class="pre">RevocationDataHolder</span></code> bytes from the input parameter.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">RevokeCredentialHolderParam</span></code>’s <code class="docutils literal notranslate"><span class="pre">signing_data</span></code> MUST include a nonce to protect against replay attacks.
The holders’s nonce is sequentially increased every time a revocation request is successfully executed.
The function MUST only accept a <code class="docutils literal notranslate"><span class="pre">RevokeCredentialHolderParam</span></code> if it has the next nonce following the sequential order.</p></li>
<li><dl class="simple">
<dt>The revocation MUST fail if any of the following conditions are met:</dt><dd><ul>
<li><p>The credential ID is not present in the registry.</p></li>
<li><p>The credential status is not one of <code class="docutils literal notranslate"><span class="pre">Active</span></code> or <code class="docutils literal notranslate"><span class="pre">NotActivated</span></code> (see <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a>).</p></li>
<li><p>The credential is not holder-revocable.</p></li>
<li><p>The signature was intended for a different contract.</p></li>
<li><p>The signature was intended for a different entrypoint.</p></li>
<li><p>The signature is expired.</p></li>
<li><p>The signature cannot be validated.
The smart contract logic SHOULD use all possible efforts to ensure that only the holder can generate and authorize a revocation request with a valid signature.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="revokecredentialother">
<span id="cis-4-functions-revokecredentialother"></span><h4><code class="docutils literal notranslate"><span class="pre">revokeCredentialOther</span></code><a class="headerlink" href="#revokecredentialother" title="Link to this heading">¶</a></h4>
<p>Revoke a credential by a revocation authority request.
A revocation authority is any entity that holds a private key corresponding to the public key registered by the issuer.
A revocation authority is authorized to revoke a credential by verifying the signature with the public key of the given identifier.</p>
<p>This entrypoint gives a general way of adding revocation rights to external entities.
It replaces the authorization checks conducted on the <code class="docutils literal notranslate"><span class="pre">sender/invoker</span></code> variable with signature verification.
In particular, it enables the issuer to provide a service for selected entities to revoke credentials without paying for revocation transactions.</p>
<section id="id13">
<h5>Parameter<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h5>
<p>It is serialized as <a class="reference internal" href="#cis-4-signatureed25519"><span class="std std-ref">SignatureEd25519</span></a> (<code class="docutils literal notranslate"><span class="pre">signature</span></code>) and data, for which the signature is computed <code class="docutils literal notranslate"><span class="pre">RevocationDataHolder</span></code> (<code class="docutils literal notranslate"><span class="pre">message</span></code>) consisting of <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_id</span></code>), metadata about the signature <a class="reference internal" href="#cis-4-signingdata"><span class="std std-ref">SigningData</span></a> (<code class="docutils literal notranslate"><span class="pre">signing_data</span></code>), a revocation public key <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> , and an optional revocation reason (<code class="docutils literal notranslate"><span class="pre">reason</span></code>), serialized similarly to <a class="reference internal" href="#cis-4-functions-revokecredentialissuer"><span class="std std-ref">revokeCredentialIssuer</span></a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RevocationDataOther ::= (credential_id: CredentialHolderId) (signing_data: SigningData) (revocation_key: PublicKeyEd25519) (reason: OptionalReason)
RevokeCredentialHolderParam ::= (signature: SignatureEd25519) (message : RevocationDataOther)
</pre></div>
</div>
</section>
<section id="id14">
<h5>Requirements<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>If revoked successfully, the credential status MUST change to <code class="docutils literal notranslate"><span class="pre">Revoked</span></code> (see <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a>).</p></li>
<li><dl class="simple">
<dt>The message to be signed MUST be produced in the following way:</dt><dd><ul>
<li><p>Start with the bytes of the domain separation string <code class="docutils literal notranslate"><span class="pre">WEB3ID:REVOKE</span></code>.</p></li>
<li><p>Append <code class="docutils literal notranslate"><span class="pre">RevocationDataOther</span></code> bytes from the input parameter.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">RevokeCredentialOtherParam</span></code>’s <code class="docutils literal notranslate"><span class="pre">signing_data</span></code> MUST include a nonce to protect against replay attacks.
The revocation authority’s nonce is sequentially increased every time a revocation request is successfully executed.
The function MUST only accept a <code class="docutils literal notranslate"><span class="pre">RevokeCredentialOtherParam</span></code> if it has the next nonce following the sequential order.</p></li>
<li><dl class="simple">
<dt>The revocation MUST fail if any of the following conditions are met:</dt><dd><ul>
<li><p>The credential ID is not present in the registry.</p></li>
<li><p>The revocation key in not present in the registry.</p></li>
<li><p>The credential status is not one of <code class="docutils literal notranslate"><span class="pre">Active</span></code> or <code class="docutils literal notranslate"><span class="pre">NotActivated</span></code> (see <a class="reference internal" href="#cis-4-functions-credentialstatus"><span class="std std-ref">credentialStatus</span></a>).</p></li>
<li><p>The signature was intended for a different contract.</p></li>
<li><p>The signature was intended for a different entrypoint.</p></li>
<li><p>The signature is expired.</p></li>
<li><p>The signature can not be validated.
The smart contract logic SHOULD use all possible efforts to ensure that only the revocation authority can generate and authorize a revocation request with a valid signature.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="registerrevocationkeys">
<span id="cis-4-functions-registerrevocationkeys"></span><h4><code class="docutils literal notranslate"><span class="pre">registerRevocationKeys</span></code><a class="headerlink" href="#registerrevocationkeys" title="Link to this heading">¶</a></h4>
<p>Register public keys that can be used by revocation authorities.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This standard does not specify how the issuer is authenticated.
Implementations can use various mechanisms.
For example, the transaction sender’s address is checked against the issuer’s account address stored in the contract.
Another option is to use <code class="docutils literal notranslate"><span class="pre">auxiliary_data</span></code> to implement a signature-based authentication mechanism.</p>
</div>
<section id="id15">
<h5>Parameter<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h5>
<p>It is serialized as First 2 bytes encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the vector of keys in little-endian, followed by this many <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> keys.
The revocation keys are followed by auxiliary data, which is serialized as 2 bytes to encode the length (<code class="docutils literal notranslate"><span class="pre">m</span></code>) of the data vector in little-endian, followed by this many bytes of data:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AuxData ::= (m: Byte²) (data: Byteᵐ)
RegisterPublicKeyParameters ::= (n: Byte²) (key: PublicKeyEd25519)ⁿ (auxiliary_data: AuxData)
</pre></div>
</div>
</section>
<section id="id16">
<h5>Requirements<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>The revocation MUST fail if some of the keys are already registered.</p></li>
<li><p>The smart contract MUST prevent resetting the nonce associated with a public key.
For example, the contract logic could keep track of all keys seen by the contract and avoid reusing the same keys even after the keys were made unavailable by calling <a class="reference internal" href="#cis-4-functions-removerevocationkeys"><span class="std std-ref">removeRevocationKeys</span></a>.</p></li>
</ul>
</section>
</section>
<section id="removerevocationkeys">
<span id="cis-4-functions-removerevocationkeys"></span><h4><code class="docutils literal notranslate"><span class="pre">removeRevocationKeys</span></code><a class="headerlink" href="#removerevocationkeys" title="Link to this heading">¶</a></h4>
<p>Make a list of public keys unavailable to revocation authorities.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This standard does not specify how the issuer is authenticated.
Implementations can use various mechanisms.
For example, the transaction sender’s address is checked against the issuer’s account address stored in the contract.
Another option is to use <code class="docutils literal notranslate"><span class="pre">auxiliary_data</span></code> to implement a signature-based authentication mechanism.</p>
</div>
<section id="id17">
<h5>Parameter<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h5>
<p>It is serialized as: First 2 bytes encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the vector of keys in little-endian, followed by this many <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> keys.
The revocation keys are followed by auxiliary data, which is serialized as 2 bytes to encode the length (<code class="docutils literal notranslate"><span class="pre">m</span></code>) of the data vector in little-endian, followed by this many bytes of data:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AuxData ::= (m: Byte²) (data: Byteᵐ)
RegisterPublicKeyParameters ::= (n: Byte²) (key: PublicKeyEd25519)ⁿ (auxiliary_data: AuxData)
</pre></div>
</div>
</section>
<section id="id18">
<h5>Requirements<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>The revocation MUST fail if some of the keys are not present in the registry.</p></li>
</ul>
</section>
</section>
<section id="revocationkeys">
<span id="cis-4-functions-revocationkeys"></span><h4><code class="docutils literal notranslate"><span class="pre">revocationKeys</span></code><a class="headerlink" href="#revocationkeys" title="Link to this heading">¶</a></h4>
<p>Query revocation keys.</p>
<section id="id19">
<h5>Response<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h5>
<p>The function outputs a list of available revocation keys.
Valid signatures with the corresponding private keys can be used to revoke any credential in the registry.</p>
<p>It is serialized as: First 2 bytes encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the vector of keys in little-endian, followed by this many <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> keys:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RegisterPublicKeyParameters ::= (n: Byte²) (key: PublicKeyEd25519)ⁿ
</pre></div>
</div>
</section>
</section>
</section>
<section id="logged-events">
<h3>Logged events<a class="headerlink" href="#logged-events" title="Link to this heading">¶</a></h3>
<p>The events defined by this specification are serialized using one byte to discriminate the different events.
A custom event SHOULD NOT have a first byte colliding with any of the events defined by this specification.</p>
<section id="registercredentialevent">
<span id="cis-4-register-credential-transfer"></span><h4><code class="docutils literal notranslate"><span class="pre">RegisterCredentialEvent</span></code><a class="headerlink" href="#registercredentialevent" title="Link to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">RegisterCredentialEvent</span></code> event MUST be logged when a new credential is registered.
The event records the credential identifier, the credential type, and the corresponding schema reference.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">RegisterCredentialEvent</span></code> event is serialized as: first a byte with the value of 249, followed by <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> (<code class="docutils literal notranslate"><span class="pre">crednetial_id</span></code>), a reference to the credential schema <a class="reference internal" href="#cis-4-schemaref"><span class="std std-ref">SchemaRef</span></a> (<code class="docutils literal notranslate"><span class="pre">schema_ref</span></code>), a credential type <a class="reference internal" href="#cis-4-credentialtype"><span class="std std-ref">CredentialType</span></a> (<code class="docutils literal notranslate"><span class="pre">credential_type</span></code>), and a reference to the credential metadata <a class="reference internal" href="#cis-4-metadataurl"><span class="std std-ref">MetadataUrl</span></a> (<code class="docutils literal notranslate"><span class="pre">metadata_url</span></code>)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CredentialEventData ::= (credential_id: CredentialHolderId) (schema_ref: SchemaRef) (credential_type: CredentialType) (metadata_url: MetadataUrl)
RegisterCredentialEvent ::= (249: Byte) (data: CredentialEventData)
</pre></div>
</div>
</section>
<section id="revokecredentialevent">
<h4><code class="docutils literal notranslate"><span class="pre">RevokeCredentialEvent</span></code><a class="headerlink" href="#revokecredentialevent" title="Link to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">RevokeCredentialEvent</span></code> event MUST be logged when a credential is revoked.
The event records the credential identifier who requested the revocation (the holder, the issuer, or a revocation authority), and an optional string with a short comment on the revocation reason.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">RevokeCredentialEvent</span></code> event is serialized as: first a byte with the value of 248, followed by <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> (<code class="docutils literal notranslate"><span class="pre">crednetial_id</span></code>), a <code class="docutils literal notranslate"><span class="pre">revoker</span></code>, and an optional revocation reason (<code class="docutils literal notranslate"><span class="pre">reason</span></code>), serialized similarly to <a class="reference internal" href="#cis-4-functions-revokecredentialissuer"><span class="std std-ref">revokeCredentialIssuer</span></a>. <code class="docutils literal notranslate"><span class="pre">revoker</span></code> is serialized as 1 byte to indicate who sent the revocation request ( 0 - issuer, 1 - holder, 2 -revocation authority); if the first byte is 2, then it is followed by a public key <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> of the revoker:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Revoker ::= (0: Byte)                         // Issuer
          | (1: Byte)                         // Holder
          | (2: Byte) (key: PublicKeyEd25519) // Other
RevokeCredentialEvent ::= (248: Byte) (credential_id: CredentialHolderId) (revoker: Revoker) (reason: OptionalReason)
</pre></div>
</div>
</section>
<section id="issuermetadata">
<span id="cis-4-events-issuermetadata"></span><h4><code class="docutils literal notranslate"><span class="pre">IssuerMetadata</span></code><a class="headerlink" href="#issuermetadata" title="Link to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">IssuerMetadata</span></code> event MUST be logged when setting the metadata URL of the issuer.
It consists of a URL for the location of the metadata for the issuer with an optional SHA256 checksum of the content.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">IssuerMetadata</span></code> event is serialized as: first a byte with the value of 247, followed by <a class="reference internal" href="cis-2.html#cis-2-metadataurl"><span class="std std-ref">MetadataUrl</span></a> (<code class="docutils literal notranslate"><span class="pre">metadata</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>IssuerMetadata ::= (247: Byte) (metadata: MetadataUrl)
</pre></div>
</div>
</section>
<section id="credentialmetadataevent">
<span id="cis-4-events-credentialmetadataevent"></span><h4><code class="docutils literal notranslate"><span class="pre">CredentialMetadataEvent</span></code><a class="headerlink" href="#credentialmetadataevent" title="Link to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">CredentialMetadataEvent</span></code> event MUST be logged when updating the credential metadata.
It consist of a credential ID and a URL for the location of the metadata for this credential with an optional SHA256 checksum of the content.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CredentialMetadataEvent</span></code> event is serialized as: first a byte with the value of 246, followed by <a class="reference internal" href="#cis-4-credentialholderid"><span class="std std-ref">CredentialHolderId</span></a> (<code class="docutils literal notranslate"><span class="pre">id</span></code>), and then a <a class="reference internal" href="#cis-4-metadataurl"><span class="std std-ref">MetadataUrl</span></a> (<code class="docutils literal notranslate"><span class="pre">metadata</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CredentialMetadataEvent ::= (246: Byte) (id: CredentialHolderId) (metadata: MetadataUrl)
</pre></div>
</div>
</section>
<section id="credentialschemarefevent">
<h4><code class="docutils literal notranslate"><span class="pre">CredentialSchemaRefEvent</span></code><a class="headerlink" href="#credentialschemarefevent" title="Link to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">CredentialSchemaRefEvent</span></code> event MUST be logged when updating the credential schema reference for a credential type.
It consist of a credential type and a URL for the location of the schema for this credential with an optional SHA256 checksum of the content.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CredentialSchemaRefEvent</span></code> event is serialized as: first a byte with the value of 245, followed by <a class="reference internal" href="#cis-4-credentialtype"><span class="std std-ref">CredentialType</span></a> (<code class="docutils literal notranslate"><span class="pre">type</span></code>), and then a <a class="reference internal" href="#cis-4-schemaref"><span class="std std-ref">SchemaRef</span></a> (<code class="docutils literal notranslate"><span class="pre">schema_ref</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CredentialSchemaRefEvent ::= (245: Byte) (type: CredentialType) (schema_ref: SchemaRef)
</pre></div>
</div>
</section>
<section id="revocationkeyevent">
<h4><code class="docutils literal notranslate"><span class="pre">RevocationKeyEvent</span></code><a class="headerlink" href="#revocationkeyevent" title="Link to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">RevocationKeyEvent</span></code> event MUST be logged when registering a new or removing an existing revocation key.
It consists of the key and the action performed with the key (registration or removal).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">RevocationKeyEvent</span></code> event is serialized as: first a byte with the value of 244, followed by the key bytes <a class="reference internal" href="#cis-4-publickeyed25519"><span class="std std-ref">PublicKeyEd25519</span></a> and 1 byte encoding the action (0 for <code class="docutils literal notranslate"><span class="pre">Register</span></code>, 1 for <code class="docutils literal notranslate"><span class="pre">Remove</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RevocationKeyAction ::= (0: Byte)    // Register
                      | (1: Byte)    // Remove
RevocationKeyEvent ::= (244: Byte) (public_key: PublicKeyEd25519) (action: RevocationKeyAction)
</pre></div>
</div>
</section>
</section>
<section id="issuer-metadata-json">
<span id="cis-4-issuer-metadata-json"></span><h3>Issuer metadata JSON<a class="headerlink" href="#issuer-metadata-json" title="Link to this heading">¶</a></h3>
<p>The issuer metadata is stored off-chain and MUST be a JSON (<span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc8259.html"><strong>RFC 8259</strong></a>) file.</p>
<p>This specification reserves a number of field names, shown in the table below.
Fields not marked with <code class="docutils literal notranslate"><span class="pre">optional</span></code> MUST be included.</p>
<div class="table-wrapper docutils container" id="id20">
<table class="docutils align-default" id="id20">
<caption><span class="caption-text">Issuer metadata JSON Object</span><a class="headerlink" href="#id20" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>JSON value type [JSON-Schema]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>string</p></td>
<td><p>The name to display for the issuer.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">icon</span></code></p></td>
<td><p>URL JSON object</p></td>
<td><p>An image URL for displaying the issuer.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code> (optional)</p></td>
<td><p>string</p></td>
<td><p>A description for the issuer.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code> (optional)</p></td>
<td><p>string (<span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html"><strong>RFC 3986</strong></a>) [<code class="docutils literal notranslate"><span class="pre">uri-reference</span></code>]</p></td>
<td><p>A URL of the issuer’s website.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Optionally a SHA256 hash of the JSON file can be logged with the <a class="reference internal" href="#cis-4-events-issuermetadata"><span class="std std-ref">IssuerMetadata</span></a> event for checking integrity.
Since the metadata JSON file could contain URLs, a SHA256 hash can optionally be associated with the URL.
To associate a hash with a URL the JSON value is an object:</p>
<div class="table-wrapper docutils container" id="id21">
<table class="docutils align-default" id="id21">
<caption><span class="caption-text">URL JSON Object</span><a class="headerlink" href="#id21" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>JSON value type [JSON-Schema]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>string (<span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html"><strong>RFC 3986</strong></a>) [<code class="docutils literal notranslate"><span class="pre">uri-reference</span></code>]</p></td>
<td><p>A URL.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hash</span></code> (optional)</p></td>
<td><p>string</p></td>
<td><p>A SHA256 hash of the URL content encoded as a hex string.</p></td>
</tr>
</tbody>
</table>
</div>
<section id="example-issuer-metadata">
<h4>Example issuer metadata<a class="headerlink" href="#example-issuer-metadata" title="Link to this heading">¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Concordium&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;icon&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;https://concordium.com/wp-content/uploads/2022/07/Concordium-1.png&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1c74f7eb1b3343a5834e60e9a8fce277f2c7553112accd42e63fae7a09e0caf8&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A public-layer 1, science-backed blockchain&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://concordium.com&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="credential-metadata-json">
<h3>Credential metadata JSON<a class="headerlink" href="#credential-metadata-json" title="Link to this heading">¶</a></h3>
<p>The credential metadata is stored off-chain and MUST be a JSON (<span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc8259.html"><strong>RFC 8259</strong></a>) file.</p>
<div class="table-wrapper docutils container" id="id22">
<table class="docutils align-default" id="id22">
<caption><span class="caption-text">Credential metadata JSON Object</span><a class="headerlink" href="#id22" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>JSON value type [JSON-Schema]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">title</span></code></p></td>
<td><p>string</p></td>
<td><p>The name to display for the credential.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">logo</span></code></p></td>
<td><p>URL JSON object</p></td>
<td><p>An image URL for displaying the credential. The RECOMMENDED size of the image is 40x40.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">backgroundColor</span></code></p></td>
<td><p>string</p></td>
<td><p>A hex code of the background color for displaying the credential.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">image</span></code> (optional)</p></td>
<td><p>URL JSON object</p></td>
<td><p>A background image URL for displaying the credential. The RECOMMENDED size of the image is 327x120.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">localization</span></code> (optional)</p></td>
<td><p>JSON object with locales as field names (<span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5646.html"><strong>RFC 5646</strong></a>) and field values are URL JSON objects linking to JSON files.
Credential issuers SHOULD provide localization files for all the languages they want to support.</p></td>
<td><p>URLs to JSON files with localized token metadata.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Where the URL JSON object is the same as in <a class="reference internal" href="#cis-4-events-issuermetadata"><span class="std std-ref">IssuerMetadata</span></a>.</p>
<p>Optionally a SHA256 hash of the JSON file can be logged with the <a class="reference internal" href="#cis-4-events-credentialmetadataevent"><span class="std std-ref">CredentialMetadataEvent</span></a> event for checking integrity.</p>
<section id="example-credential-metadata">
<h4>Example credential metadata<a class="headerlink" href="#example-credential-metadata" title="Link to this heading">¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Concordium Employment&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;logo&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;https://concordium.com/wp-content/uploads/2022/07/Concordium-1.png&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1c74f7eb1b3343a5834e60e9a8fce277f2c7553112accd42e63fae7a09e0caf8&quot;</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">   </span><span class="nt">&quot;backgroundColor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#000000&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://concordium.com/employment/vc-background.png&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">   </span><span class="nt">&quot;localization&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">&quot;da-DK&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://location.of/the/danish/metadata.json&quot;</span><span class="p">,</span>
<span class="w">       </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;624a1a7e51f7a87effbf8261426cb7d436cf597be327ebbf113e62cb7814a34b&quot;</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Note that that URL addresses for images can come with or without the <code class="docutils literal notranslate"><span class="pre">hash</span></code> attribute.
In the example, the <code class="docutils literal notranslate"><span class="pre">image</span></code> attribute value does not specify <code class="docutils literal notranslate"><span class="pre">hash</span></code>.
In this case, no content integrity check will be performed.</p>
<p>The Danish localization JSON file could be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;employer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Arbejdsgiver&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;employedFrom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ansat fra&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;employedUntil&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ansat indtil&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="smart-contract-limitations">
<span id="cis-4-smart-contract-limitations"></span><h2>Smart contract limitations<a class="headerlink" href="#smart-contract-limitations" title="Link to this heading">¶</a></h2>
<p>A number of limitations are important to be aware of:</p>
<ul class="simple">
<li><p>The byte size of smart contract function parameters are limited to at most 65535 B.</p></li>
<li><p>Each logged event is limited to 0.5 KiB.</p></li>
<li><p>The total size of the smart contract module is limited to 512 KiB.</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="cis-5.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">CIS-5: Smart Contract Wallet Standard</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="cis-3.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">CIS-3: Sponsored Transaction Standard</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Concordium
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CIS-4: Credential Registry Standard</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#general-types-and-serialization">General types and serialization</a><ul>
<li><a class="reference internal" href="#bool"><code class="docutils literal notranslate"><span class="pre">Bool</span></code></a></li>
<li><a class="reference internal" href="#credentialholderid"><code class="docutils literal notranslate"><span class="pre">CredentialHolderId</span></code></a></li>
<li><a class="reference internal" href="#metadataurl"><code class="docutils literal notranslate"><span class="pre">MetadataUrl</span></code></a></li>
<li><a class="reference internal" href="#contractaddress"><code class="docutils literal notranslate"><span class="pre">ContractAddress</span></code></a></li>
<li><a class="reference internal" href="#accountaddress"><code class="docutils literal notranslate"><span class="pre">AccountAddress</span></code></a></li>
<li><a class="reference internal" href="#entrypointname"><code class="docutils literal notranslate"><span class="pre">EntrypointName</span></code></a></li>
<li><a class="reference internal" href="#timestamp"><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code></a></li>
<li><a class="reference internal" href="#nonce"><code class="docutils literal notranslate"><span class="pre">Nonce</span></code></a></li>
<li><a class="reference internal" href="#publickeyed25519"><code class="docutils literal notranslate"><span class="pre">PublicKeyEd25519</span></code></a></li>
<li><a class="reference internal" href="#signatureed25519"><code class="docutils literal notranslate"><span class="pre">SignatureEd25519</span></code></a></li>
<li><a class="reference internal" href="#signingdata"><code class="docutils literal notranslate"><span class="pre">SigningData</span></code></a></li>
<li><a class="reference internal" href="#schemaref"><code class="docutils literal notranslate"><span class="pre">SchemaRef</span></code></a></li>
<li><a class="reference internal" href="#credentialtype"><code class="docutils literal notranslate"><span class="pre">CredentialType</span></code></a></li>
<li><a class="reference internal" href="#credentialinfo"><code class="docutils literal notranslate"><span class="pre">CredentialInfo</span></code></a></li>
<li><a class="reference internal" href="#credentialstatus"><code class="docutils literal notranslate"><span class="pre">CredentialStatus</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#contract-functions">Contract functions</a><ul>
<li><a class="reference internal" href="#credentialentry"><code class="docutils literal notranslate"><span class="pre">credentialEntry</span></code></a><ul>
<li><a class="reference internal" href="#parameter">Parameter</a></li>
<li><a class="reference internal" href="#response">Response</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cis-4-functions-credentialstatus"><code class="docutils literal notranslate"><span class="pre">credentialStatus</span></code></a><ul>
<li><a class="reference internal" href="#id2">Parameter</a></li>
<li><a class="reference internal" href="#id3">Response</a></li>
<li><a class="reference internal" href="#id4">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#issuer"><code class="docutils literal notranslate"><span class="pre">issuer</span></code></a><ul>
<li><a class="reference internal" href="#id5">Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registrymetadata"><code class="docutils literal notranslate"><span class="pre">registryMetadata</span></code></a><ul>
<li><a class="reference internal" href="#id6">Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registercredential"><code class="docutils literal notranslate"><span class="pre">registerCredential</span></code></a><ul>
<li><a class="reference internal" href="#id7">Parameter</a></li>
<li><a class="reference internal" href="#id8">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#revokecredentialissuer"><code class="docutils literal notranslate"><span class="pre">revokeCredentialIssuer</span></code></a><ul>
<li><a class="reference internal" href="#id9">Parameter</a></li>
<li><a class="reference internal" href="#id10">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#revokecredentialholder"><code class="docutils literal notranslate"><span class="pre">revokeCredentialHolder</span></code></a><ul>
<li><a class="reference internal" href="#id11">Parameter</a></li>
<li><a class="reference internal" href="#id12">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#revokecredentialother"><code class="docutils literal notranslate"><span class="pre">revokeCredentialOther</span></code></a><ul>
<li><a class="reference internal" href="#id13">Parameter</a></li>
<li><a class="reference internal" href="#id14">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registerrevocationkeys"><code class="docutils literal notranslate"><span class="pre">registerRevocationKeys</span></code></a><ul>
<li><a class="reference internal" href="#id15">Parameter</a></li>
<li><a class="reference internal" href="#id16">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#removerevocationkeys"><code class="docutils literal notranslate"><span class="pre">removeRevocationKeys</span></code></a><ul>
<li><a class="reference internal" href="#id17">Parameter</a></li>
<li><a class="reference internal" href="#id18">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#revocationkeys"><code class="docutils literal notranslate"><span class="pre">revocationKeys</span></code></a><ul>
<li><a class="reference internal" href="#id19">Response</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#logged-events">Logged events</a><ul>
<li><a class="reference internal" href="#registercredentialevent"><code class="docutils literal notranslate"><span class="pre">RegisterCredentialEvent</span></code></a></li>
<li><a class="reference internal" href="#revokecredentialevent"><code class="docutils literal notranslate"><span class="pre">RevokeCredentialEvent</span></code></a></li>
<li><a class="reference internal" href="#issuermetadata"><code class="docutils literal notranslate"><span class="pre">IssuerMetadata</span></code></a></li>
<li><a class="reference internal" href="#credentialmetadataevent"><code class="docutils literal notranslate"><span class="pre">CredentialMetadataEvent</span></code></a></li>
<li><a class="reference internal" href="#credentialschemarefevent"><code class="docutils literal notranslate"><span class="pre">CredentialSchemaRefEvent</span></code></a></li>
<li><a class="reference internal" href="#revocationkeyevent"><code class="docutils literal notranslate"><span class="pre">RevocationKeyEvent</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#issuer-metadata-json">Issuer metadata JSON</a><ul>
<li><a class="reference internal" href="#example-issuer-metadata">Example issuer metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credential-metadata-json">Credential metadata JSON</a><ul>
<li><a class="reference internal" href="#example-credential-metadata">Example credential metadata</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#smart-contract-limitations">Smart contract limitations</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>