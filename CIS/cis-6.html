<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Concordium DID Method Version 1.0" href="../ID/concordium-did.html" /><link rel="prev" title="CIS-5: Smart Contract Wallet Standard" href="cis-5.html" />

    <link rel="shortcut icon" href="../_static/concordium-logo-no-text.svg"/><meta name="generator" content="sphinx-4.2.0, furo 2021.09.08"/>
        <title>CIS-6: Track-and-Trace Standard - Interoperability Specifications</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=c7c65a82b42f6b978e58466c1e9ef2509836d916" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Interoperability Specifications</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/concordium-logo-black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/concordium-logo-white.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Interoperability Specifications</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Protocol Updates</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../updates/P2.html">Protocol Update 2 - Alpha Centauri 2.0 - Transaction Memos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P3.html">Protocol Update 3 - Alpha Centauri 3.0 - Account Aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P4.html">Protocol Update 4 - Sirius - Delegation and new contract state</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P5.html">Protocol Update 5 - Smart contract upgradability, performance improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates/P6.html">Protocol Update 6 - Concordium BFT consensus protocol, changes in Wasm validation and execution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Standards</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cis-0.html">CIS-0: Standard Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-1.html">CIS-1: Concordium Token Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-2.html">CIS-2: Concordium Token Standard 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-3.html">CIS-3: Sponsored Transaction Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-4.html">CIS-4: Credential Registry Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="cis-5.html">CIS-5: Smart Contract Wallet Standard</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">CIS-6: Track-and-Trace Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ID/concordium-did.html">Concordium DID Method Version 1.0</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="cis-6-track-and-trace-standard">
<span id="cis-6"></span><h1>CIS-6: Track-and-Trace Standard<a class="headerlink" href="#cis-6-track-and-trace-standard" title="Permalink to this headline">¶</a></h1>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>Created</p></th>
<td><p>Apr 25, 2024</p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Final</p></th>
<td><p>Apr 26, 2024</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Supported versions</p></th>
<td><div class="line-block">
<div class="line">Smart contract version 1 or newer</div>
<div class="line">(Protocol version 4 or newer)</div>
</div>
</td>
</tr>
<tr class="row-even"><th class="stub"><p>Standard identifier</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">CIS-6</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Requires</p></th>
<td><p><a class="reference internal" href="cis-0.html#cis-0"><span class="std std-ref">CIS-0</span></a></p></td>
</tr>
</tbody>
</table></div>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>A standard interface that defines the logged events for tracking items in a smart contract.
The interface defines two events:</p>
<ul class="simple">
<li><p><em>ItemCreatedEvent</em> logs the <code class="docutils literal notranslate"><span class="pre">item_id</span></code>, <code class="docutils literal notranslate"><span class="pre">metadata_url</span></code>, and the <code class="docutils literal notranslate"><span class="pre">initial_status</span></code>;</p></li>
<li><p><em>ItemStatusChangedEvent</em> logs the <code class="docutils literal notranslate"><span class="pre">item_id</span></code>, <code class="docutils literal notranslate"><span class="pre">new_status</span></code>, and the <code class="docutils literal notranslate"><span class="pre">additional_data</span></code>;</p></li>
</ul>
</section>
<section id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”,  “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2119.html"><strong>RFC 2119</strong></a>.</p>
<section id="general-types-and-serialization">
<h3>General types and serialization<a class="headerlink" href="#general-types-and-serialization" title="Permalink to this headline">¶</a></h3>
<section id="itemid">
<span id="cis-6-itemid"></span><h4><code class="docutils literal notranslate"><span class="pre">ItemId</span></code><a class="headerlink" href="#itemid" title="Permalink to this headline">¶</a></h4>
<p>Each item MUST have a unique <code class="docutils literal notranslate"><span class="pre">ItemId</span></code>.
An <code class="docutils literal notranslate"><span class="pre">ItemId</span></code> is a variable-length ASCII string up to 255 characters.</p>
<p>The identifier is serialized as: 1 byte for the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) followed by this many bytes for the ASCII encoding of the identifier:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ItemId ::= (n: Byte) (id: Byteⁿ)
</pre></div>
</div>
</section>
<section id="metadataurl">
<span id="cis-6-metadataurl"></span><h4><code class="docutils literal notranslate"><span class="pre">MetadataUrl</span></code><a class="headerlink" href="#metadataurl" title="Permalink to this headline">¶</a></h4>
<p>A URL and optional checksum for metadata stored outside of this contract.</p>
<p>It is serialized as: 2 bytes for the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the metadata URL in little-endian and then this many bytes for the URL to the metadata (<code class="docutils literal notranslate"><span class="pre">url</span></code>) followed by an optional checksum.
The checksum is serialized by 1 byte to indicate whether a hash of the metadata is included.
If its value is 0, then there is no hash; if the value is 1, then 32 bytes for a SHA256 hash (<code class="docutils literal notranslate"><span class="pre">hash</span></code>) follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>MetadataChecksum ::= (0: Byte)
                   | (1: Byte) (hash: Byte³²)

MetadataUrl ::= (n: Byte²) (url: Byteⁿ) (checksum: MetadataChecksum)
</pre></div>
</div>
</section>
<section id="status">
<span id="cis-6-status"></span><h4><code class="docutils literal notranslate"><span class="pre">Status</span></code><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h4>
<p>The status defined by this specification is serialized using one byte to discriminate the different statuses that an item can have.
The smart contract can have up to 255 different statuses defined for an item.</p>
<p>It is serialized as: a byte of value (<code class="docutils literal notranslate"><span class="pre">n</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Status ::= (n: Byte)
</pre></div>
</div>
</section>
<section id="additionaldata">
<span id="cis-6-additionaldata"></span><h4><code class="docutils literal notranslate"><span class="pre">AdditionalData</span></code><a class="headerlink" href="#additionaldata" title="Permalink to this headline">¶</a></h4>
<p>Additional bytes to include in the event <code class="docutils literal notranslate"><span class="pre">ItemStatusChangedEvent</span></code>, which can be used to add additional use-case-specific data (e.g. temperature, longitude, latitude, …) to the event.</p>
<p>It is serialized as: the first 2 bytes encode the length (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of the data, followed by this many bytes for the data (<code class="docutils literal notranslate"><span class="pre">data</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AdditionalData ::= (n: Byte²) (data: Byteⁿ)
</pre></div>
</div>
</section>
</section>
<section id="logged-events">
<h3>Logged events<a class="headerlink" href="#logged-events" title="Permalink to this headline">¶</a></h3>
<p>The events defined by this specification are serialized using one byte to discriminate the different events.
A custom event SHOULD NOT have a first byte colliding with any of the events defined by this specification.</p>
<section id="itemcreatedevent">
<span id="cis-6-events-itemcreatedevent"></span><h4><code class="docutils literal notranslate"><span class="pre">ItemCreatedEvent</span></code><a class="headerlink" href="#itemcreatedevent" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">ItemCreatedEvent</span></code> event MUST be logged when a new item is created in the smart contract.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ItemCreatedEvent</span></code> event is serialized as: first a byte with the value of 237, followed by the <a class="reference internal" href="#cis-6-itemid"><span class="std std-ref">ItemId</span></a> (<code class="docutils literal notranslate"><span class="pre">id</span></code>), the <a class="reference internal" href="#cis-6-metadataurl"><span class="std std-ref">MetadataUrl</span></a> (<code class="docutils literal notranslate"><span class="pre">metadata</span></code>), and then the <a class="reference internal" href="#cis-6-status"><span class="std std-ref">Status</span></a> (<code class="docutils literal notranslate"><span class="pre">initial_status</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ItemCreatedEvent ::= (237: Byte) (item_id: ItemId) (metadata: MetadataUrl) (initial_status: Status)
</pre></div>
</div>
</section>
<section id="itemstatuschangedevent">
<span id="cis-6-events-itemstatuschangedevent"></span><h4><code class="docutils literal notranslate"><span class="pre">ItemStatusChangedEvent</span></code><a class="headerlink" href="#itemstatuschangedevent" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">ItemStatusChangedEvent</span></code> event MUST be logged when an item status is updated in the smart contract state.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ItemStatusChangedEvent</span></code> event is serialized as: first a byte with the value of 236, followed by the <a class="reference internal" href="#cis-6-itemid"><span class="std std-ref">ItemId</span></a> (<code class="docutils literal notranslate"><span class="pre">id</span></code>), the <a class="reference internal" href="#cis-6-status"><span class="std std-ref">Status</span></a> (<code class="docutils literal notranslate"><span class="pre">new_status</span></code>), and then the <a class="reference internal" href="#cis-6-additionaldata"><span class="std std-ref">AdditionalData</span></a> (<code class="docutils literal notranslate"><span class="pre">additional_data</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ItemStatusChangedEvent ::= (236: Byte) (item_id: ItemId) (new_status: Status) (additional_data: AdditionalData)
</pre></div>
</div>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../ID/concordium-did.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Concordium DID Method Version 1.0</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="cis-5.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">CIS-5: Smart Contract Wallet Standard</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Concordium |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>. |
            <a class="muted-link" href="../_sources/CIS/cis-6.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CIS-6: Track-and-Trace Standard</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#general-types-and-serialization">General types and serialization</a><ul>
<li><a class="reference internal" href="#itemid"><code class="docutils literal notranslate"><span class="pre">ItemId</span></code></a></li>
<li><a class="reference internal" href="#metadataurl"><code class="docutils literal notranslate"><span class="pre">MetadataUrl</span></code></a></li>
<li><a class="reference internal" href="#status"><code class="docutils literal notranslate"><span class="pre">Status</span></code></a></li>
<li><a class="reference internal" href="#additionaldata"><code class="docutils literal notranslate"><span class="pre">AdditionalData</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#logged-events">Logged events</a><ul>
<li><a class="reference internal" href="#itemcreatedevent"><code class="docutils literal notranslate"><span class="pre">ItemCreatedEvent</span></code></a></li>
<li><a class="reference internal" href="#itemstatuschangedevent"><code class="docutils literal notranslate"><span class="pre">ItemStatusChangedEvent</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    </body>
</html>